<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    table {
      border-collapse: collapse;
    }
    td {
      border: 1px solid black;
      padding: 5px;
    }
    .flex-container {
      display: flex;
      margin-top: 10px;
    }
  
    .input-container {
      display: flex;
      width: 350px;
    }
    .span-container {
      width: 100px;
    }
    .tier-span {
      width: 250px;
      margin-right: 10px;
    }
  
    .material-input {
      width: 100px;
      text-align: center;
    }

    .material-input2 {
      width: 100px;
      text-align: center;
    }
  </style>
</head>
<body>
<div style="display: flex;">

  <div>
    <table id="tableWood" style="margin-right: 10px;">
      <tr>
        <td colspan="3" style="text-align: center;">목재</td>
      </tr>
      <tr>
        <td>티어</td>
        <td>재료</td>
        <td>가공품</td>
      </tr>
      <tr>
        <td>1</td>
        <td>거친 통나무</td>
        <td>-</td>
      </tr>
      <tr>
        <td>2</td>
        <td>자작나무 원목</td>
        <td>자작나무 판자</td>
      </tr>
      <tr>
        <td>3</td>
        <td>밤나무 원목</td>
        <td>밤나무 판자</td>
      </tr>
      <tr>
        <td>4</td>
        <td>소나무 원목</td>
        <td>소나무 판자</td>
      </tr>
      <tr>
        <td>5</td>
        <td>삼나무 원목</td>
        <td>삼나무 판자</td>
      </tr>
      <tr>
        <td>6</td>
        <td>블러드오크 원목</td>
        <td>블러드오크 판자</td>
      </tr>
      <tr>
        <td>7</td>
        <td>애셴바크 원목</td>
        <td>애셴바크 판자</td>
      </tr>
      <tr>
        <td>8</td>
        <td>화이트우드 원목</td>
        <td>화이트우드 판자</td>
      </tr>
    </table>
  </div>

  <div>
    <table id="tableStone" style="margin-right: 10px;">
      <tr>
        <td colspan="3" style="text-align: center;">석재</td>
      </tr>
      <tr>
        <td>티어</td>
        <td>재료</td>
        <td>가공품</td>
      </tr>
      <tr>
        <td>1</td>
        <td>잡석</td>
        <td>-</td>
      </tr>
      <tr>
        <td>2</td>
        <td>석회암</td>
        <td>석회암 석괴</td>
      </tr>
      <tr>
        <td>3</td>
        <td>사암</td>
        <td>사암 석괴</td>
      </tr>
      <tr>
        <td>4</td>
        <td>트래버틴</td>
        <td>트래버틴 석괴</td>
      </tr>
      <tr>
        <td>5</td>
        <td>화강암</td>
        <td>화강암 석괴</td>
      </tr>
      <tr>
        <td>6</td>
        <td>점판암</td>
        <td>점판암 석괴</td>
      </tr>
      <tr>
        <td>7</td>
        <td>현무암</td>
        <td>현무암 석괴</td>
      </tr>
      <tr>
        <td>8</td>
        <td>대리석</td>
        <td>대리석 석괴</td>
      </tr>
    </table>
  </div>

  <div>
    <table id="tableOre" style="margin-right: 10px;">
      <tr>
        <td colspan="3" style="text-align: center;">광석</td>
      </tr>
      <tr>
        <td>티어</td>
        <td>재료</td>
        <td>가공품</td>
      </tr>
      <tr>
        <td>1</td>
        <td>-</td>
        <td>-</td>
      </tr>
      <tr>
        <td>2</td>
        <td>구리 광석</td>
        <td>구리 주괴</td>
      </tr>
      <tr>
        <td>3</td>
        <td>아연 광석</td>
        <td>청동 주괴</td>
      </tr>
      <tr>
        <td>4</td>
        <td>철광석</td>
        <td>강철 주괴</td>
      </tr>
      <tr>
        <td>5</td>
        <td>티타늄 광석</td>
        <td>티타늄 강철주괴</td>
      </tr>
      <tr>
        <td>6</td>
        <td>루나이트 광석</td>
        <td>루나이트 강철주괴</td>
      </tr>
      <tr>
        <td>7</td>
        <td>운석 광석</td>
        <td>운석 강철주괴</td>
      </tr>
      <tr>
        <td>8</td>
        <td>아다만티움 광석</td>
        <td>아다만티움 강철주괴</td>
      </tr>
    </table>
  </div>

  <div>
    <table id="tableLeather" style="margin-right: 10px;">
      <tr>
        <td colspan="3" style="text-align: center;">가죽</td>
      </tr>
      <tr>
        <td>티어</td>
        <td>재료</td>
        <td>가공품</td>
      </tr>
      <tr>
        <td>1</td>
        <td>가죽 조각</td>
        <td>-</td>
      </tr>
      <tr>
        <td>2</td>
        <td>질긴 가죽</td>
        <td>뻣뻣한 피혁</td>
      </tr>
      <tr>
        <td>3</td>
        <td>얇은 가죽</td>
        <td>두꺼운 피혁</td>
      </tr>
      <tr>
        <td>4</td>
        <td>적당한 가죽</td>
        <td>가공된 피혁</td>
      </tr>
      <tr>
        <td>5</td>
        <td>헤비 가죽</td>
        <td>보존 처리된 피혁</td>
      </tr>
      <tr>
        <td>6</td>
        <td>튼튼한 가죽</td>
        <td>경화 처리된 피혁</td>
      </tr>
      <tr>
        <td>7</td>
        <td>두꺼운 가죽</td>
        <td>보강 처리된 피혁</td>
      </tr>
      <tr>
        <td>8</td>
        <td>탄력있는 가죽</td>
        <td>최고 처리한 피혁</td>
      </tr>
    </table>
  </div>

  <div>
    <table id="tableTextile">
      <tr>
        <td colspan="3" style="text-align: center;">섬유</td>
      </tr>
      <tr>
        <td>티어</td>
        <td>재료</td>
        <td>가공품</td>
      </tr>
      <tr>
        <td>1</td>
        <td>-</td>
        <td>-</td>
      </tr>
      <tr>
        <td>2</td>
        <td>목화</td>
        <td>단순한 직물</td>
      </tr>
      <tr>
        <td>3</td>
        <td>아마</td>
        <td>깔끔한 직물</td>
      </tr>
      <tr>
        <td>4</td>
        <td>삼</td>
        <td>괜찮은 직물</td>
      </tr>
      <tr>
        <td>5</td>
        <td>스카이플라워</td>
        <td>화려한 직물</td>
      </tr>
      <tr>
        <td>6</td>
        <td>앰버리프 목화</td>
        <td>호화로운 직물</td>
      </tr>
      <tr>
        <td>7</td>
        <td>태양 아마</td>
        <td>호사스러운 직물</td>
      </tr>
      <tr>
        <td>8</td>
        <td>유령 삼</td>
        <td>바로크 직물</td>
      </tr>
    </table>
  </div>
</div>
<br>
<hr>


<div style="display: flex; margin-top: 20px;">
  <span style="margin-right: 10px;">종류 : </span>
  <div>
    <select id="selectMaterial" style="text-align: center;" onchange="updateTierLabels(); calculateTierLabels();">
      <option value="Wood">목재</option> 
      <option value="Stone">석재</option>
      <option value="Ore">광석</option>
      <option value="Leather">가죽</option>
      <option value="Textile">섬유</option>
    </select>
  </div>

  <span style="margin-right: 10px; margin-left: 10px;">티어 : </span>
  <div>
    <select id="selectTier" style="text-align: center;" onclick="showProductName()">
      <option value="1">1</option> 
      <option value="2">2</option>
      <option value="3">3</option>
      <option value="4">4</option>
      <option value="5">5</option>
      <option value="6">6</option>
      <option value="7">7</option>
      <option value="8">8</option>
    </select>
  </div>
  <span id="nameProduct" style="margin-left: 20px;"></span>
</div>

<div>
  <div class="flex-container">
    <span style="margin-right: 10px;">목표수량 :</span>
    <input id="goal" type="number" min="1" step="1" oninput="validateGoalInput(this)" style="text-align: right;">
    <button style="margin-left: 10px;" onclick="calculate()">계산</button>
  </div>
  <span>가지고 있는 수량</span>
  <div class="input-container">
    <span class="span-container">1티어</span>
    <span id="tier1" class="tier-span"></span>
    <input id="haveMaterial1" type="text" class="material-input" disabled>
  </div>
  <div class="input-container">
    <span class="span-container">2티어</span>
    <span id="tier2" class="tier-span"></span>
    <input id="haveMaterial2" type="text" class="material-input">
  </div>
  <div class="input-container">
    <span class="span-container">3티어</span>
    <span id="tier3" class="tier-span"></span>
    <input id="haveMaterial3" type="text" class="material-input">
  </div>
  <div class="input-container">
    <span class="span-container">4티어</span>
    <span id="tier4" class="tier-span"></span>
    <input id="haveMaterial4" type="text" class="material-input">
  </div>
  <div class="input-container">
    <span class="span-container">5티어</span>
    <span id="tier5" class="tier-span"></span>
    <input id="haveMaterial5" type="text" class="material-input">
  </div>
  <div class="input-container">
    <span class="span-container">6티어</span>
    <span id="tier6" class="tier-span"></span>
    <input id="haveMaterial6" type="text" class="material-input">
  </div>
  <div class="input-container">
    <span class="span-container">7티어</span>
    <span id="tier7" class="tier-span"></span>
    <input id="haveMaterial7" type="text" class="material-input">
  </div>
  <div class="input-container">
    <span class="span-container">8티어</span>
    <span id="tier8" class="tier-span"></span>
    <input id="haveMaterial8" type="text" class="material-input">
  </div>

  <div style="margin-top: 30px;">
    <span>필요한 재료</span>
    <div class="input-container">
      <span class="span-container">1티어</span>
      <span id="ttier1" class="tier-span"></span>
      <input id="needMaterial1" type="text" class="material-input2" disabled>
    </div>
    <div class="input-container">
      <span class="span-container">2티어</span>
      <span id="ttier2" class="tier-span"></span>
      <input id="needMaterial2" type="text" class="material-input2">
    </div>
    <div class="input-container">
      <span class="span-container">3티어</span>
      <span id="ttier3" class="tier-span"></span>
      <input id="needMaterial3" type="text" class="material-input2">
    </div>
    <div class="input-container">
      <span class="span-container">4티어</span>
      <span id="ttier4" class="tier-span"></span>
      <input id="needMaterial4" type="text" class="material-input2">
    </div>
    <div class="input-container">
      <span class="span-container">5티어</span>
      <span id="ttier5" class="tier-span"></span>
      <input id="needMaterial5" type="text" class="material-input2">
    </div>
    <div class="input-container">
      <span class="span-container">6티어</span>
      <span id="ttier6" class="tier-span"></span>
      <input id="needMaterial6" type="text" class="material-input2">
    </div>
    <div class="input-container">
      <span class="span-container">7티어</span>
      <span id="ttier7" class="tier-span"></span>
      <input id="needMaterial7" type="text" class="material-input2">
    </div>
    <div class="input-container">
      <span class="span-container">8티어</span>
      <span id="ttier8" class="tier-span"></span>
      <input id="needMaterial8" type="text" class="material-input2">
    </div>  




</div>


<script>
  // 목표 수량에는 숫자만 들어가도록
  function validateGoalInput(input) {
    if (input.value < 1) {
      input.value = 1;
    }
  }

  // 티어 선택되면 상위 재료 칸 비활성화
  function showProductName() {
      resetMaterials(); // 인풋박스 한번에 비우기
      resetMaterials2(); // 인풋박스 한번에 비우기
      showName(); // 가공품 이름 띄우기
      var selectedTier = document.getElementById("selectTier").value;
      for (var i = 1; i <= 8; i++) {
          var haveMaterialInput = document.getElementById("haveMaterial" + i);
          if (i < selectedTier) {
              haveMaterialInput.disabled = false;
          } else {
              haveMaterialInput.disabled = true;
          }
      }
  }

  // 첫번째 그룹 인풋박스 한번에 비우기
  function resetMaterials() {
    var needMaterials = document.querySelectorAll('.material-input');

    needMaterials.forEach(function(material, index) {
      material.value = '';
      material.disabled = false; // disable 속성 해제
    });
  }

  
  // 두번째 그룹 인풋박스 한번에 비우기
  function resetMaterials2() {
    var needMaterials = document.querySelectorAll('.material-input2');

    needMaterials.forEach(function(material, index) {
      material.value = '';
      material.disabled = false; // disable 속성 해제
    });
  }


  // '가지고 있는 수량' 이름 업데이트
  function updateTierLabels() {
    showName(); // 가공품 이름 띄우기
    var selectElement = document.getElementById("selectMaterial");
    var selectedValue = selectElement.value;
    
    var tiers = ["tier1", "tier2", "tier3", "tier4", "tier5", "tier6", "tier7", "tier8"];
    var labels = [];
    switch(selectedValue) {

      case "Wood":
        labels = ["-", "자작나무 판자", "밤나무 판자", "소나무 판자", "삼나무 판자", "블러드오크 판자", "애셴바크 판자", "화이트우드 판자"];
        break;
      case "Stone":
        labels = ["-", "석회암 석괴", "사암 석괴", "트래버틴 석괴", "화강암 석괴", "점판암 석괴", "현무암 석괴", "대리석 석괴"];
        break;
      case "Ore":
        labels = ["-", "구리 주괴", "청동 주괴", "강철 주괴", "티타늄 강철주괴", "루나이트 강철주괴", "운석 강철주괴", "아다만티움 강철주괴"];
        break;
      case "Leather":
        labels = ["-", "	뻣뻣한 피혁", "	두꺼운 피혁", "가공된 피혁", "보존 처리된 피혁", "경화 처리된 피혁", "보강 처리된 피혁", "최고 처리한 피혁"];
        break;
      case "Textile":
        labels = ["-", "단순한 직물", "깔끔한 직물", "괜찮은 직물", "화려한 직물", "호화로운 직물", "호사스러운 직물", "바로크 직물"];
        break;
      default:
        labels = [];
        break;
    }
      // 각 tier span 업데이트
      for (var i = 0; i < tiers.length; i++) {
          var tierSpan = document.getElementById(tiers[i]);
          if (i < labels.length) {
            tierSpan.textContent = labels[i];
          } else {
            tierSpan.textContent = "";
          }
        }

    }

    // '필요한 재료' 이름 업데이트
    function calculateTierLabels() {
      var selectElement = document.getElementById("selectMaterial");
      var selectedValue = selectElement.value;
      
      var tiers = ["ttier1", "ttier2", "ttier3", "ttier4", "ttier5", "ttier6", "ttier7", "ttier8"];
      var labels = [];
      switch(selectedValue) {
  
        case "Wood":
          labels = ["거친 통나무", "자작나무 원목", "밤나무 원목", "소나무 원목", "삼나무 원목", "블러드오크 원목", "애셴바크 원목", "화이트우드 원목"];
          break;
        case "Stone":
          labels = ["잡석", "석회암", "사암", "트래버틴", "화강암", "점판암", "현무암", "대리석"];
          break;
        case "Ore":
          labels = ["-", "구리 광석", "아연 광석", "철광석", "티타늄 광석", "루나이트 광석", "운석 광석", "아다만티움 광석"];
          break;
        case "Leather":
          labels = ["가죽 조각", "질긴 가죽", "얇은 가죽", "적당한 가죽", "헤비 가죽", "튼튼한 가죽", "두꺼운 가죽", "탄력있는 가죽"];
          break;
        case "Textile":
          labels = ["-", "목화", "아마", "삼", "스카이플라워", "앰버리프 목화", "태양 아마", "유령 삼"];
          break;
        default:
          labels = [];
          break;
      }
        // 각 tier span 업데이트
        for (var i = 0; i < tiers.length; i++) {
            var tierSpan = document.getElementById(tiers[i]);
            if (i < labels.length) {
              tierSpan.textContent = labels[i];
            } else {
              tierSpan.textContent = "";
            }
          }
  
      }

      // 가공품 이름 띄우기
      function showName() {
        var materialValue = document.getElementById("selectMaterial").value; // 재료
        var tierValue = parseInt(document.getElementById("selectTier").value); // 티어
        var processedProducts = {
          "Wood":["-", "자작나무 판자", "밤나무 판자", "소나무 판자", "삼나무 판자", "블러드오크 판자", "애셴바크 판자", "화이트우드 판자"],
          "Stone":["-", "석회암 석괴", "사암 석괴", "트래버틴 석괴", "화강암 석괴", "점판암 석괴", "현무암 석괴", "대리석 석괴"],
          "Ore":["-", "구리 주괴", "청동 주괴", "강철 주괴", "티타늄 강철주괴", "루나이트 강철주괴", "운석 강철주괴", "아다만티움 강철주괴"],
          "Leather":["-", "	뻣뻣한 피혁", "	두꺼운 피혁", "가공된 피혁", "보존 처리된 피혁", "경화 처리된 피혁", "보강 처리된 피혁", "최고 처리한 피혁"],
          "Textile":["-", "단순한 직물", "깔끔한 직물", "괜찮은 직물", "화려한 직물", "호화로운 직물", "호사스러운 직물", "바로크 직물"]
        }
        var processedProduct = processedProducts[materialValue][tierValue - 1];
        document.getElementById("nameProduct").textContent = processedProduct;
      }


    // 페이지 로드 시 초기화
    updateTierLabels(); // '가지고 있는 수량' 이름 업데이트
    calculateTierLabels(); // '필요한 재료' 이름 업데이트

    // 계산 버튼
    function calculate() {
      resetMaterials2(); // 인풋박스 한번에 비우기
      var materialValue = document.getElementById("selectMaterial").value; // 재료
      var tierValue = parseInt(document.getElementById("selectTier").value); // 티어
      var goalValue = document.getElementById("goal").value; // 목표수량

      if(goalValue == "") {
        alert('수량이 입력되지 않았습니다.');
      } else {
        switch (tierValue) {
          case 1:
            alert('1티어는 만들 수 없습니다.');
            break;
          case 2:
            needMaterial2.value = goalValue * 1; // 2렙 : 2렙 재료 1개 필요
            // 나머지 칸 비활성화
            for (var i = 1; i <= 8; i++) {
              var needMaterial = document.getElementById("needMaterial" + i);
              if (i !== 2) {
                  needMaterial.disabled = true;
              }
            }
            break;
          case 3:
            var haveMaterialId2 = document.getElementById("haveMaterial2").value.match(/\d+/); // 가지고 있는 2티어 가공품
            var input_haveMaterial2 = haveMaterialId2 ? parseInt(haveMaterialId2[0]) : 0; // 선택값에서 숫자만 추출

              // 가지고있는 2티어 가공품이 없을때 : 2렙 재료 1개 필요
              if (input_haveMaterial2 == "") {
                needMaterial2.value = goalValue * 1;
              // 가지고있는 2티어 가공품이 있을때 : 가공품 있는 만큼 먼저 제외하고 나머지 계산
              } else {
                needMaterial2.value = goalValue * 1 - input_haveMaterial2;
              }
              // 3티어 원재료는 공통 : 3렙 원재료 2개 필요
              needMaterial3.value = goalValue * 2; 

              // 나머지 칸 필드 비활성화
              for (var i = 4; i <= 8; i++) {
                var needMaterial = document.getElementById("needMaterial" + i);
                needMaterial.disabled = true;
              }
            break;
          case 4:
            var haveMaterialId2 = document.getElementById("haveMaterial2").value.match(/\d+/); // 가지고 있는 2티어 가공품
            var haveMaterialId3 = document.getElementById("haveMaterial3").value.match(/\d+/); // 가지고 있는 3티어 가공품
            var input_haveMaterial2 = haveMaterialId2 ? parseInt(haveMaterialId2[0]) : 0; // 선택값에서 숫자만 추출
            var input_haveMaterial3 = haveMaterialId3 ? parseInt(haveMaterialId3[0]) : 0; // 선택값에서 숫자만 추출

            // 가지고있는 3티어 가공품이 없을때
            if (input_haveMaterial3 == "") {
              needMaterial2.value = (goalValue * 1) - input_haveMaterial2;
              needMaterial3.value = goalValue * 2;
            // 가지고있는 3티어 가공품이 있을때 : 가공품 있는 만큼 먼저 제외하고 나머지 계산
            } else {
              // 가지고 있는 3티어 가공품이 충분할때
              if (input_haveMaterial3 >= goalValue) {
                needMaterial2.value = "";
                needMaterial3.value = "";
              // 3티어 가공품이 있긴 한데 부족할때
              } else {
                temp_needMaterial3 = goalValue - input_haveMaterial3; // 3티어 가공품 부족분
                needMaterial2.value = (temp_needMaterial3 * 1) - input_haveMaterial2;
                needMaterial3.value = temp_needMaterial3 * 2;
              }
            }
            // 4티어 원재료는 공통 : 4렙 원재료 2개 필요
            needMaterial4.value = goalValue * 2; 
            
            // 나머지 칸 필드 비활성화
            for (var i = 5; i <= 8; i++) {
              var needMaterial = document.getElementById("needMaterial" + i);
              needMaterial.disabled = true;
            }
            break;
          case 5:
            // Your logic for tier 5
            break;
          case 6:
            // Your logic for tier 6
            break;
          case 7:
            // Your logic for tier 7
            break;
          case 8:
            // Your logic for tier 8
            break;
          default:
            // Handle any other cases
            break;
        }
      }

    }

</script>



</body>
</html>